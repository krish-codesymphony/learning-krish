<html>
  <head>
    <title>Fetch Demo</title>
  </head>
  <body>
    <pre id="p"></pre>

    <script>
      const url = "https://jsonplaceholder.typicode.com/posts";
      const method = "POST";
      const headers = {
        "content-type": "application/json",
      };
      const body = {
        title: "A Fetch made POST",
        body: "-_-",
        userId: 11,
      };

      async function fetching(url, method, body, headers) {
        let result = "";
        if (body == null || body == "") {
          result = await fetch(url, {
            method: method,
            headers: headers,
          });
        } else {
          result = await fetch(url, {
            method: method,
            body: JSON.stringify(body),
            headers: headers,
          });
        }

        if (result.ok) return await result.json();
        else return new Error("Error Fetching Data....!");
      }

      // -------------------------------------------------
      let fetched = fetching(url, method, body, headers);
      fetched
        .then((data) => {
          console.log("Posted:", data);
        })
        .catch((error) => {
          console.log("Error Encountered:", error);
        });

      // -------------------------------------------------
      let get = fetching(url, "GET", null, headers);
      get.then((data) => {
        document.getElementById("p").textContent = JSON.stringify(
          data,
          null,
          3
        );
        console.log(data);
      });
    </script>
  </body>
</html>
